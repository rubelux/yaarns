<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <title>Shaker Configuration API</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: true,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
   </head> 

     <div class="header"><h1 class="heading"><a href="#">
          <span>Shaker</span></a></h1>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="../">Mojito Documentation</a>
        &#160;&#160;::&#160;&#160;
        <a href="index.html" title="Shaker">Shaker</a>
        &#160;&#160;::&#160;&#160;
        
           <a href="shaker_usage.html">Usage</a>
        &#160;&#160;::&#160;&#160;
        
        
           <a href="shaker_examples.html">Shaker App Example</a>
        
        </p>

      </div>
      <div class="content">
   <div class="section" id="shaker-configuration-api">
<h1>Shaker Configuration API<a class="headerlink" href="#shaker-configuration-api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="shaker-configuration-files">
<span id="shaker-config-files"></span><h2>Shaker Configuration Files<a class="headerlink" href="#shaker-configuration-files" title="Permalink to this headline">¶</a></h2>
<p>You configure Shaker in the <tt class="docutils literal"><span class="pre">application.json</span></tt> file or create a separate file
called <tt class="docutils literal"><span class="pre">shaker.json</span></tt>. For simplicity, we recommend using <tt class="docutils literal"><span class="pre">application.json</span></tt>.
If both exist, Shaker will merge the configurations of both files, giving precedence
to configurations in <tt class="docutils literal"><span class="pre">application.json</span></tt>.</p>
</div>
<div class="section" id="environment-and-dimension-configuration">
<span id="shaker-config-env-dimension"></span><h2>Environment and Dimension Configuration<a class="headerlink" href="#environment-and-dimension-configuration" title="Permalink to this headline">¶</a></h2>
<p>In Mojito, most of the JSON configuration files use
<a class="reference external" href="https://github.com/yahoo/ycb">Yahoo! Configuration Bundle (YCB)</a>, meaning your
configurations get merged based on the context being used and the order
of the contexts set in your <tt class="docutils literal"><span class="pre">dimension.json</span></tt> file. For more information, see
<a class="reference external" href="http://developer.yahoo.com/cocktails/mojito/docs/topics/mojito_using_contexts.html">Using Context Configurations</a>
in the <a class="reference external" href="http://developer.yahoo.com/cocktails/mojito/docs/">Mojito documentation</a>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
   <span class="p">{</span>
       <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
       <span class="s2">&quot;shaker&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">//shaker default config</span>
       <span class="p">}</span>
   <span class="p">},</span>
   <span class="p">{</span>
       <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;environment:dev&quot;</span> <span class="p">],</span>
       <span class="s2">&quot;shaker&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="c1">//shaker config for dev</span>
       <span class="p">}</span>
   <span class="p">},</span>
        <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;environment: my-syntethic-env&quot;</span><span class="p">],</span>
        <span class="s2">&quot;shaker&quot;</span><span class="o">:</span><span class="p">{</span>
                <span class="c1">//other config</span>
        <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>As we mention in the <a class="reference external" href="shaker_usage.html">Usage chapter</a>, Shaker and Mojito will choose
the configuration set for a particular context. For example, the following command will
merge the configurations of <tt class="docutils literal"><span class="pre">&quot;settings:</span> <span class="pre">master&quot;</span></tt> and <tt class="docutils literal"><span class="pre">&quot;settings:</span> <span class="pre">environment:dev&quot;</span></tt>:</p>
<p><tt class="docutils literal"><span class="pre">$</span> <span class="pre">mojito</span> <span class="pre">shake</span> <span class="pre">--context</span> <span class="pre">&quot;environment:dev&quot;</span></tt></p>
</div>
<div class="section" id="api-table">
<span id="shaker-config-api"></span><h2>API Table<a class="headerlink" href="#api-table" title="Permalink to this headline">¶</a></h2>
<div class="section" id="shaker-configuration">
<span id="api-table-shaker-config"></span><h3>Shaker Configuration<a class="headerlink" href="#shaker-configuration" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="9%" />
<col width="9%" />
<col width="12%" />
<col width="28%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Required?</th>
<th class="head">Default Value</th>
<th class="head">Possible Values</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">task</span></tt></td>
<td>string</td>
<td>no</td>
<td>raw</td>
<td>raw, local, s3, mobstor, your own
See <a class="reference internal" href="shaker_usage.html#env-context"><em>Env and Context
Configuration</em></a>.</td>
<td>Defines how the rollups will be deployed.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">module</span></tt></td>
<td>string</td>
<td>no</td>
<td>null</td>
<td>N/A</td>
<td>Defines how the rollups will be deployed.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">taskConfig</span></tt></td>
<td>object</td>
<td>no</td>
<td>null</td>
<td>See:
<em class="xref std std-ref">Object taskConfig</em>.</td>
<td>Defines how the rollups will be deployed.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">minify</span></tt></td>
<td>boolean/Object</td>
<td>no</td>
<td>true</td>
<td>See:
<em class="xref std std-ref">Object minifyConfig</em>.</td>
<td>Specifies whether to minify the rollups.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">jslint</span></tt></td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>N/A</td>
<td>Specifies whether to jslint the rollups.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">regexp</span></tt></td>
<td>string</td>
<td>yes, if
replaced</td>
<td>null</td>
<td>Regular expression to match</td>
<td>Defines a regular expression to match in the
rollups.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">replace</span></tt></td>
<td>string</td>
<td>no</td>
<td>null</td>
<td>Replacement string</td>
<td>Defines the string that replaces what is
matched by the regular expression.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">comboCDN</span></tt></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>N/A</td>
<td>Specifies to push all the application
resources to CDN.
YUI and <tt class="docutils literal"><span class="pre">taskConfig</span></tt> are needed.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">optimizeBootstrap</span></tt></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>N/A</td>
<td><p class="first">Creates a optimized way to load all bootstrap
JS files in parallel without blocking
the rendering of the page.  See</p>
<blockquote class="last">
<div><a class="reference external" href="shaker_usage.html">Usage</a> for more info.</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">rollupConfig</span></tt></td>
<td>object</td>
<td>no</td>
<td>null</td>
<td>See
<a class="reference internal" href="#obj-rollupconfig"><em>Object rollupConfig</em></a>.</td>
<td>Specifies which resources to rollup for each
mojit (views, langs, controller, ...).</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">routeBundle</span></tt></td>
<td>object</td>
<td>no</td>
<td>null</td>
<td>See
<a class="reference internal" href="#obj-routebundle"><em>Object routeBundle</em></a>.</td>
<td>Specifies which mojits to bundle together for
each entry point defined in our application.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">appBundle</span></tt></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>N/A</td>
<td>Bundles all the resources of our application.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">filterInCore</span></tt></td>
<td>array</td>
<td>no</td>
<td>null</td>
<td>Mojito core modules</td>
<td>Filters the specified Mojito core modules
from being included in the core bundle.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="object-taskconfig">
<span id="obj-taskconfig"></span><h3>Object taskConfig<a class="headerlink" href="#object-taskconfig" title="Permalink to this headline">¶</a></h3>
<p>Allows you to configure your task in case you create your own task or are using some
third-party module to push to a CDN.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="9%" />
<col width="9%" />
<col width="13%" />
<col width="22%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Required?</th>
<th class="head">Default Value</th>
<th class="head">Possible Values</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">prefix</span></tt></td>
<td>string</td>
<td>no</td>
<td>null</td>
<td>raw, local, s3, mobstor, your own
See <a class="reference internal" href="shaker_usage.html#env-context"><em>Env and Context
Configuration</em></a>.</td>
<td>Defines how the rollups will be deployed.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">&lt;taskName&gt;</span></tt></td>
<td>object</td>
<td>no</td>
<td>null</td>
<td>N/A</td>
<td>Defines the configuration properties for a
given task (for more info check the FAQ).</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="object-minifyconfig">
<span id="obj-minifyconfig"></span><h3>Object minifyConfig<a class="headerlink" href="#object-minifyconfig" title="Permalink to this headline">¶</a></h3>
<p>Further JS/CSS minify options.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="9%" />
<col width="9%" />
<col width="13%" />
<col width="22%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Required?</th>
<th class="head">Default Value</th>
<th class="head">Possible Values</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">js</span></tt></td>
<td>object</td>
<td>no</td>
<td>null</td>
<td>See <em class="xref std std-ref">Object jsminifyConfig</em>.</td>
<td>Defines JS minify options.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">css</span></tt></td>
<td>object</td>
<td>no</td>
<td>null</td>
<td>N/A</td>
<td>Defines CSS minify options. Currently not
supported.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="object-jsminifyconfig">
<span id="obj-jsminifyconfig"></span><h3>Object jsminifyConfig<a class="headerlink" href="#object-jsminifyconfig" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="9%" />
<col width="9%" />
<col width="13%" />
<col width="22%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Required?</th>
<th class="head">Default Value</th>
<th class="head">Possible Values</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">mangle</span></tt></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>N/A</td>
<td>Whether mangle variable names.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">squeeze</span></tt></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>N/A</td>
<td>Does various optimizations that result in
smaller, less readable code.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="object-rollupconfig">
<span id="obj-rollupconfig"></span><h3>Object rollupConfig<a class="headerlink" href="#object-rollupconfig" title="Permalink to this headline">¶</a></h3>
<p>You can define which parts you want to rollup for each mojit. If your application is
offline, you may want to rollup all the components. If you just want to have the minimum
shipped to the client, use the default for <tt class="docutils literal"><span class="pre">bundleBinders</span></tt>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="9%" />
<col width="9%" />
<col width="12%" />
<col width="26%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Required?</th>
<th class="head">Default Value</th>
<th class="head">Possible Values</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">bundleBinders</span></tt></td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>N/A</td>
<td>Includes binders and their dependencies in
the rollups.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">bundleViews</span></tt></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>N/A</td>
<td>Includes and compile (as a JS module) views
in the rollups.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">bundleController</span></tt></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>See
<a class="reference internal" href="#obj-taskconfig"><em>Object taskConfig</em></a>.</td>
<td>Includes controller and its dependencies and
the proper languages in the rollups.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">bundleAll</span></tt></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>See
<a class="reference internal" href="#obj-taskconfig"><em>Object taskConfig</em></a>.</td>
<td>Bundles all possible resources for each mojit.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="object-routebundle">
<span id="obj-routebundle"></span><h3>Object routeBundle<a class="headerlink" href="#object-routebundle" title="Permalink to this headline">¶</a></h3>
<p>Route bundle allow you to precompute and rollup high-coverage mojits (see
<em class="xref std std-ref">Bundle Mojits</em> for detailed information), so you can optimize your
startup time. The keys of the object correspont to <strong>routes</strong> you define in <tt class="docutils literal"><span class="pre">routes.json</span></tt>,
and the <strong>values</strong> are arrays of mojits and their actions to bundle together. The default
action is <tt class="docutils literal"><span class="pre">index</span></tt>.</p>
<p>The example <tt class="docutils literal"><span class="pre">shaker</span></tt> configuration below maps routes to mojit actions with
<tt class="docutils literal"><span class="pre">routeBundle</span></tt>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="s2">&quot;shaker&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;routeBundle&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;myRoute1&quot;</span><span class="o">:</span> <span class="p">[</span>
                        <span class="nx">Mojit1</span><span class="p">.</span><span class="nx">index</span><span class="p">,</span>
                        <span class="nx">Mojit2</span><span class="p">.</span><span class="nx">index</span><span class="p">,</span>
                        <span class="nx">Mojit3</span><span class="p">.</span><span class="nx">otherAction</span>
                <span class="p">],</span>
                <span class="s2">&quot;myRoute2&quot;</span><span class="o">:</span> <span class="p">[</span>
                        <span class="c1">//mojit and action list</span>
                <span class="p">]</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>

   </div>
